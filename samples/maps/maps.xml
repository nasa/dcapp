<?xml version="1.0"?>
<DCAPP>
    <Variable Type="Decimal" InitialValue="85">LATITUDE</Variable>
    <Variable Type="Decimal" InitialValue="100">LONGITUDE</Variable>
    <Variable Type="Decimal" InitialValue="1">ZOOM</Variable>
    <Variable Type="Integer" InitialValue="0">CLEAR_TRAILS</Variable>
    <Variable Type="Integer" InitialValue="0">CURR_DISPLAY_TEXTURE</Variable>

    <!-- UTM constants -->
    <Constant Name="LonMin">0</Constant>
    <Constant Name="LonMax">360</Constant>
    <Constant Name="LatMin">80</Constant>
    <Constant Name="LatMax">90</Constant>

    <!-- UPS constants -->
    <Constant Name="LonPolarAxis">90</Constant>
    <Constant Name="LatOrigin">90</Constant>
    <Constant Name="LatOuter">80</Constant>

    <Constant Name="BgColor">0 0 0</Constant>
    <Variable Type="Integer">ZoomSelected</Variable>
    <Variable Type="Decimal" InitialValue="1">ZoomSlider</Variable>
    <Variable Type="Integer">ClearTrailsSelected</Variable>
    <Variable Type="Integer">LayerSwapSelected</Variable>

    <Defaults>
        <String ForceMono="Numeric" HorizontalAlign="Center" VerticalAlign="Middle" Size="100" Color="1 1 1" LineColor="0 0 0"/>
        <Button Type="Momentary" Width="2000" Height="100" HorizontalAlign="Center" VerticalAlign="Middle"/>
        <Rectangle LineColor=".5 .5 .5" HorizontalAlign="Center" VerticalAlign="Middle" LineWidth="2.0" Color = ".5 .5 .5"/>
        <Container X="1250" Width="1250" Height="5" HorizontalAlign="Center" VerticalAlign="Middle"/>
    </Defaults>

    <Window X="30" Y="30" Width="1200" Height="720" ForceUpdate="0.01" ActiveDisplay="1">
        <Panel DisplayIndex="1" BackgroundColor="#BgColor" VirtualWidth="2500" VirtualHeight="1500">

            <UPSMap Latitude="@LATITUDE" Longitude="@LONGITUDE" Zoom="@ZOOM" TrailWidth="5" TrailColor="1 0 0 .7"
                    EnableIcon="1" EnableTrail="1" FnClearTrail="@CLEAR_TRAILS" 
                    X="50" Y="275"
                    IconFile="images/arrow.bmp" IconWidth="50" IconHeight="50" IconRotationOffset="-90" TextureIndex="@CURR_DISPLAY_TEXTURE"
                    Width="1175" Height="1175" HorizontalAlign="Left" VerticalAlign="Bottom" EnableCircularMap="1" EnableTrackUp="1" EnableInverseTheta="1"
                    ZoneLon1="100" ZoneLon2="120" ZoneLon3="120" ZoneLon4="100" ZoneLat1="85" ZoneLat2="85" ZoneLat3="86" ZoneLat4="86">
                <Textures>
                    <MapTexture File="images/moon.bmp"  Index="0" PolarAxisOffset="#LonPolarAxis" LatOrigin="#LatOrigin" LatOuter="#LatOuter"/>
                    <MapTexture File="images/moon2.bmp" Index="1" PolarAxisOffset="#LonPolarAxis" LatOrigin="#LatOrigin" LatOuter="#LatOuter"/>
                </Textures>
                <Points>
                    <MapImage File="images/point1.bmp" Width="250" Height="250" Latitude="83.7" Longitude="-135" Layers="0"/>
                    <MapImage File="images/point2.bmp" Width="100" Height="100" Latitude="83.5" Longitude="-45" Layers="1"/>
                    <MapString Size="50" Latitude="86" Longitude="0" Layers="0,1">ZONE01</MapString>
                </Points>
            </UPSMap>

            <UPSMap Latitude="@LATITUDE" Longitude="@LONGITUDE" Zoom="@ZOOM" TrailWidth="5" TrailColor="1 0 0 .7"
                    EnableIcon="1" EnableTrail="1" FnClearTrail="@CLEAR_TRAILS"
                    X="2450" Y="1450" 
                    IconFile="images/arrow.bmp" IconWidth="50" IconHeight="50" IconRotationOffset="-90" TextureIndex="@CURR_DISPLAY_TEXTURE"
                    Width="1175" Height="1175" HorizontalAlign="Right" VerticalAlign="Top" EnableInverseTheta="1"
                    ZoneLon1="100" ZoneLon2="120" ZoneLon3="120" ZoneLon4="100" ZoneLat1="85" ZoneLat2="85" ZoneLat3="86" ZoneLat4="86">
                <Textures>
                    <MapTexture File="images/moon2.bmp" Index="0" PolarAxisOffset="#LonPolarAxis" LatOrigin="#LatOrigin" LatOuter="#LatOuter"/>
                    <MapTexture File="images/moon.bmp"  Index="1" PolarAxisOffset="#LonPolarAxis" LatOrigin="#LatOrigin" LatOuter="#LatOuter"/>
                </Textures>
            </UPSMap>

            <!--UTMMap Latitude="@LATITUDE" Longitude="@LONGITUDE" Zoom="@ZOOM" TrailWidth="5" TrailColor=".25 .25 .25 .7"
                    EnableIcon="#ENABLE_POSITION_INDICATOR" EnableTrail="@ENABLE_MAP_TRAILS" FnClearTrail="@CLEAR_TRAILS"
                    LonMin="#LonMin" LonMax="#LonMax" LatMin="#LatMin" LatMax="#LatMax" X="2450" Y="1450" 
                    IconFile="images/arrow.bmp" IconWidth="50" IconHeight="50" IconRotationOffset="-90" 
                    Width="1175" Height="1225" HorizontalAlign="Right" VerticalAlign="Top"
                    ZoneLon1="100" ZoneLon2="120" ZoneLon3="120" ZoneLon4="100" ZoneLat1="85" ZoneLat2="85" ZoneLat3="86" ZoneLat4="86"
                    >images/moon.bmp</UTMMap-->

            <!-- clear button -->
            <Button Type="Momentary" X="1000" Y="135" Width="100" Height="100" Variable="@ClearTrailsSelected"/>
            <If Value="@ClearTrailsSelected">
                <True>
                    <Rectangle X="1000" Y="135" Width="100" Height="100" FillColor="1 .5 0.5"/>
                    <Set Variable="@CLEAR_TRAILS" Operator="+=">1</Set>
                </True>
                <False>
                    <Rectangle X="1000" Y="135" Width="100" Height="100" FillColor=".5 .5 0.5"/>
                </False>
            </If>

            <!-- layer swap button -->
            <Button Type="Toggle" X="1150" Y="135" Width="100" Height="100" SwitchVariable="@CURR_DISPLAY_TEXTURE"/>
            <On>
                <Rectangle X="1150" Y="135" Width="100" Height="100" FillColor="1 .5 0.5"/>
            </On>
            <Off>
                <Rectangle X="1150" Y="135" Width="100" Height="100" FillColor=".5 .5 0.5"/>
            </Off>

            <!-- lat/long -->
            <String X="2100" Y="125" HorizontalAlign="Right" Size="80">Lat:</String>
            <String X="2400" Y="125" HorizontalAlign="Right" Size="80">@LATITUDE(%.3f)</String>
            <String X="1275" Y="125" HorizontalAlign="Left" Size="80">Lon:</String>
            <String X="1475" Y="125" HorizontalAlign="Left" Size="80">@LONGITUDE(%.3f)</String>

            <!-- ZOOM -->
            <String X="100" Y="125" HorizontalAlign="Left" Size="80">Zoom:</String>
            <String X="400" Y="125" HorizontalAlign="Left" Size="80">@ZOOM(%.1f)</String>

            <Container X="50" Y="50" VirtualWidth="10" Width="1175" HorizontalAlign="Left" VerticalAlign="Middle">
                <Rectangle FillColor=".5 .5 .5"/>
                <Button Type="Momentary" X="@ZoomSlider" Width="10" Height="20" Variable="@ZoomSelected"/>
                <If Value="@ZoomSelected">
                    <True>
                        <MouseMotion XVariable="@ZoomSlider"/>
                        <If Value1="@ZoomSlider" Operator="gt" Value2="10">
                            <Set Variable="@ZoomSlider">10</Set>
                        </If>
                        <If Value1="@ZoomSlider" Operator="lt" Value2="1">
                            <Set Variable="@ZoomSlider">1</Set>
                        </If>
                        <Rectangle X="@ZoomSlider" Width="1" Height="20" FillColor="0.5 1 0.5"/>
                        <Set Variable="@ZOOM">@ZoomSlider</Set>
                    </True>
                    <False>
                        <If Value1="@ZoomSlider" Operator="gt" Value2="10">
                            <Set Variable="@ZoomSlider">10</Set>
                        </If>
                        <If Value1="@ZoomSlider" Operator="lt" Value2="1">
                            <Set Variable="@ZoomSlider">1</Set>
                        </If>
                        <Rectangle X="@ZoomSlider" Width="1" Height="20" FillColor="0.5 0.5 0.5"/>
                    </False>
                </If>
            </Container>

            <KeyboardEvent Key="w">
                <OnPress>
                    <Set Variable="@LATITUDE" Operator="+=">.01</Set>
                    <If Value1="@LATITUDE" Operator="gt" Value2="#LatOrigin">
                        <Set Variable="@LATITUDE">#LatOrigin</Set>
                    </If>
                </OnPress>
            </KeyboardEvent>
            <KeyboardEvent Key="a">
                <OnPress>
                    <Set Variable="@LONGITUDE" Operator="-=">.36</Set>
                    <If Value1="@LONGITUDE" Operator="lt" Value2="0">
                        <Set Variable="@LONGITUDE">360</Set>
                    </If>
                </OnPress>
            </KeyboardEvent>
            <KeyboardEvent Key="s">
                <OnPress>
                    <Set Variable="@LATITUDE" Operator="-=">.01</Set>
                    <If Value1="@LATITUDE" Operator="lt" Value2="#LatOuter">
                        <Set Variable="@LATITUDE">#LatOuter</Set>
                    </If>
                </OnPress>
            </KeyboardEvent>
            <KeyboardEvent Key="d">
                <OnPress>
                    <Set Variable="@LONGITUDE" Operator="+=">.36</Set>
                    <If Value1="@LONGITUDE" Operator="gt" Value2="360">
                        <Set Variable="@LONGITUDE">0</Set>
                    </If>
                </OnPress>
            </KeyboardEvent>
        </Panel>
    </Window>
</DCAPP>
